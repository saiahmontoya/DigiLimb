<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="DigiLimbDesktop.ConnectionsPage"
             Title="Bluetooth Device Scanner">

    <VerticalStackLayout Padding="20" Spacing="20">
        <!-- Start Scan Button -->
        <Button x:Name="btnScan" Text="Start Scan" Clicked="btnScan_Click" IsVisible="True" />

        <!-- Allow Incoming Connection Button -->
        <Button x:Name="btnAllowIncomingConnection" Text="Allow Incoming Connection" Clicked="btnAllowIncomingConnection_Click" IsVisible="True" />

        <!-- Awaiting Connection Message -->
        <Label x:Name="lblAwaitingConnection" Text="Awaiting connection..." IsVisible="False" FontSize="18" Margin="0,10,0,5" TextColor="OrangeRed" />

        <Label x:Name="lblConnectedDevice"
           Text="No device connected"
           TextColor="Red"
           FontSize="16"
           IsVisible="False"
           HorizontalOptions="Center"
           VerticalOptions="Center"/>

        <!-- Discovered Devices List -->
        <Label Text="Discovered Devices:" FontSize="18" Margin="0,10,0,5" IsVisible="False" x:Name="lblDevicesList" />

        <ScrollView HeightRequest="300" IsVisible="False" x:Name="devicesScrollView">
            <CollectionView x:Name="DevicesListView" SelectionMode="Single" SelectionChanged="OnDeviceSelected">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10" Margin="5" BorderColor="Gray" BackgroundColor="LightGray">
                            <VerticalStackLayout>
                                <Label Text="{Binding DisplayName}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text="{Binding DeviceId}" FontSize="14" />
                                <Label Text="{Binding ManufacturerData}" FontSize="12" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </ScrollView>

        <!-- Connect Button -->
        <Button x:Name="btnConnect" Text="Connect to Selected Device" Clicked="btnConnect_Click" IsEnabled="False" />

        <!-- Back Button -->
        <Button x:Name="btnBack" Text="Back" Clicked="btnBack_Click" IsVisible="True" />

        <!-- Paired Device Info -->
        <Label x:Name="lblPairedDevice" FontSize="18" Text="No device paired" Margin="0,10,0,5" TextColor="Green" IsVisible="False" />

        <!-- Log Area -->
        <Editor x:Name="txtLogs" HeightRequest="150" IsReadOnly="True" BackgroundColor="LightGray"/>

		<!-- Server/Client Button -->
		<Button x:Name="btnStartServerClient" Text="Start Server/Client" Clicked="btnStartServerClient_Click" IsVisible="True"/>



	</VerticalStackLayout>
</ContentPage>